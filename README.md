# PR Code Coverage Report Action
A GitHub action that adds a comment on PR that has the code coverage report

Note that this action will not execute any tests, it reads lcov coverage report generated by your test runner.

## Example output

<table role="table"><tbody><tr><th>Total Coverage</th><th>39.86%</th></tr></tbody></table><p></p><details> <summary>Coverage Report</summary> <table> <tbody> <tr> <th>File</th> <th>Branches</th> <th>Funcs</th> <th>Lines</th> </tr> <tr> <td colspan='5'><b>src</b></td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/index.js'>index.js</a></td> <td>17.48%</td> <td>49.29%</td> <td>28.51%</td> </tr> <tr> <td colspan='5'><b>src/lib</b></td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/lib/file1.js'>file1.js</a></td> <td>74.19%</td> <td>49.30%</td> <td>35.82%</td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/lib/file2.js'>file2.js</a></td> <td>43.17%</td> <td>20.48%</td> <td>8.47%</td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/lib/file3.js'>file3.js</a></td> <td>85.71%</td> <td>88.89%</td> <td>83.19%</td> </tr> <tr> <td colspan='5'><b>src/components</b></td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/components/main.js'>main.js</a></td> <td>62.64%</td> <td>68.39%</td> <td>20.73%</td> </tr> <tr> <td colspan='5'><b>src/services</b></td> </tr> <tr> <td>&nbsp; &nbsp;<a href='https://github.com/example/foo/blob/f9d42291812ed03bb197e48050ac38ac6befe4e5/src/services/service1.js'>service1.js</a></td> <td>30.74%</td> <td>51.84%</td> <td>6.93%</td> </tr> </tbody> </table></details> </td> </tr> </tbody></table>

## Inputs

##### `github-token` (**Required**)
Github token used for posting the comment. To use the key provided by the GitHub
action runner, use `${{ secrets.GITHUB_TOKEN }}`.

##### `lcov-file` (**Optional**)
The location of the lcov file to read the coverage report from. Defaults to
`./coverage/lcov.info`.

##### `lcov-base` (**Optional**)
The location of the lcov file resulting from running the tests in the base
branch. When this is set a diff of the coverage percentages is shown.

## Usage

### Create a workflow
```yml
name: 'PR Code Coverage Report Action'
on: 
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  task-check:
    runs-on: ubuntu-latest
    steps:
      - uses: venkatsarvesh/pr-code-coverage-report-action@v1.0.0
        with:
          repo-token: "${{ secrets.GITHUB_TOKEN }}"
```

## Acknowledgements

The initial code is based on [ziishaned/jest-reporter-action](https://github.com/ziishaned/jest-reporter-action).
## :memo: Licence
MIT
